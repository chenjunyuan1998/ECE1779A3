<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Image Gallery</title>
</head>
<body>
<table id="table">

</table>
<p>{{items}}</p>
<!--{% if (items is defined) and items %}-->
<!--  <h2>Current Stored Image</h2>-->
<!--<table class = "Image table">-->
<!--<thead>-->
<!--           <th>Key</th>-->
<!--           <th>Image</th>-->

<!--</thead>-->
<!--       {% for item in items %}-->
<!--       <tr>-->
<!--           <td>{{ item.key }} </td>-->
<!--           <td><img src= "data:image/png;base64,{{ item.image }}" alt={{item.image}}  class="image-preview"/></td>-->
<!--           <td>-->
<!--               <form action="{{ url_for('upload')}}" method="post">-->
<!--                <input input type="hidden"  name="key" value={{item.key}}><br><br>-->
<!--                <input type="file" class="custom-file-input" name="file" value="Select File" required>-->
<!--                <input type="submit" value="Update">-->
<!--                <div class="status">{{ status }}</div>-->
<!--               </form>-->
<!--           </td>-->
<!--           <td>-->
<!--               <form action="{{ url_for('delete_image')}}" method="post">-->
<!--                <input input type="hidden"  name="key" value={{item.key}}><br><br>-->
<!--                <input type="submit" value="Delete">-->
<!--                <div class="status">{{ status }}</div>-->
<!--               </form>-->
<!--           </td>-->
<!--       </tr>-->
<!--       {% endfor %}-->
<!--</table>-->
<!--{% else %}-->
<!--        <h3>There is no image.</h3>-->

<!--{% endif %}-->
<!--<a href="{{ url_for('profile')}}" data-item ="main">Go back to profile</a>-->
<script type = "text/javascript">

    var data = JSON.parse('{{items}}');
    function createTable(array) {

    var table = document.createElement('table');
    //var keys = Object.keys(array[0]);

    var thead = document.createElement("thead");
    var header_row = document.createElement('tr');
    //for(var i = 0;i < keys.length;i ++)
    //{
        var header_cell1 = document.createElement('th');
        var header_cell2 = document.createElement('th');
        header_cell1.textContent = 'key';
        header_cell2.textContent = 'value';
        header_row.appendChild(header_cell1);
        header_row.appendChild(header_cell2);
    //}
    thead.appendChild(header_row);
    table.appendChild(thead); // append thead to table

    var tbody = document.createElement("tbody");
    for (var i = 0; i < array.length; i++) {
        var row = document.createElement('tr');
        for (const [key, value] of Object.entries(array[i])) {
            var cell = document.createElement('td');
            //var image = document.createElement('td');
            //console.log("key : " + key);
            cell.textContent = key
            var src = "data:image/png;base64,";
                src += value;
            var image = new Image();
                image.src = src
            row.appendChild(cell);
            row.appendChild(image);
        }
        tbody.appendChild(row);
    }
    table.appendChild(tbody); // append tbody to table

    return table;
}
var table = createTable(data)
document.getElementById("table").appendChild(table)
</script>
</body>
</html>